# 要求
### 3.1 概述
支持 HomeKit 配件协议 (HAP) 的配件必须符合以下要求及其各自章节中包含的任何功能特定要求。
### 3.2 一般要求
一个支持HAP的配件：
* 必须支持“4附件设置”（第 29 页）中定义的附件设置。
* 可能会暴露其他接口，例如公共API。
### 3.3 Wi-Fi要求
* 在 HomeKit 配对之前，使用 Wi-Fi 进行 HAP 通信的配件必须与 iOS 设备位于同一 Wi-Fi 网络上。
* 将配件加入 Wi-Fi 网络的方法会因您使用的开发平台而异。
### 3.4 固件更新
* 附件不得在固件更新成功后降级固件。
* 附件必须增加配置编号 (CN)。对于 IP 附件，请参阅“6.4 发现”（第 57 页），对于蓝牙附件，请参阅固件更新后的“7.4.2.1 HAP BLE 常规广告格式”（第 118 页）。
* 配件必须维护在固件更新后保持不变的服务和特性的实例 ID。
* 附件不得重复使用由当前固件更新删除的服务或特征中的实例 ID。
### 3.5 合并要求
支持多种传输的配件（例如，用于 IP 的 HomeKit 附件协议和用于蓝牙 LE 的 HomeKit 附件协议）必须确保以下信息在所有传输中相同：
* 这些附件和每个附件的附件实例 ID。
* 这些服务和附件中每个服务的服务实例 ID。
* 这些 HAP 特性和服务中每个特性的 HAP 特性实例 ID。